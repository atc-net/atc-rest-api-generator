openapi: 3.0.0
info:
  title: Demo Api
  description: Demo Api - SingleFileVersion
  version: '1.0'
  contact:
    name: atc-net A/S
servers:
  - url: /api/v1
    description: Api version 1.0
x-authorize-roles:
  - admin
  - operator
paths:
  /users:
    x-authentication-required: true
    get:
      summary: Get all users
      description: Get all users
      operationId: getUsers
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Users'
        '409':
          description: Conflict
  '/addresses/{postalCode}':
    x-authentication-required: true
    x-authorize-roles: [operator]
    get:
      summary: Get addresses by postal code
      description: Get addresses by postal code
      operationId: getAddressesByPostalCodes
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Address'
        '404':
          description: Not Found
    parameters:
      - name: postalCode
        in: path
        required: true
        description: The postalCode to limit addresses on
        schema:
          type: string
components:
  schemas:
    User:
      title: User
      description: A single user.
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 00000000-0000-0000-0000-000000000000
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
          format: email
          example: email@email.dk
        homepage:
          type: string
          format: uri
        homeAddress:
          $ref: '#/components/schemas/Address'
        companyAddress:
          $ref: '#/components/schemas/Address'
    Users:
      description: A list of users.
      type: array
      items:
        $ref: '#/components/schemas/User'
      x-tags:
        - Users
      title: Users
    Address:
      title: Address
      type: object
      properties:
        streetName:
          type: string
          maxLength: 255
        streetNumber:
          type: string
        postalCode:
          type: string
        cityName:
          type: string
        myCountry:
          $ref: '#/components/schemas/Country'
    Country:
      title: Country
      type: object
      properties:
        name:
          type: string
        alpha2Code:
          type: string
          minLength: 2
          maxLength: 2
          pattern: '^[A-Za-z]{2}$'
        alpha3Code:
          type: string
          minLength: 3
          maxLength: 3
          pattern: '^[A-Za-z]{3}$'
      required:
        - name
        - alpha2Code
        - alpha3Code